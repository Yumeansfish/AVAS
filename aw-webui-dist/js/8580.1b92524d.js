(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[8580],{18580:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});n(59581),n(17),n(5086);var i=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("Timeline")]),e("input-timeinterval",{staticClass:"mb-3",attrs:{defaultDuration:t.timeintervalDefaultDuration,maxDuration:t.maxDuration},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}}),e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Events shown: "+t._s(t.num_events))]),e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Swimlanes:"),e("select",{directives:[{name:"model",rawName:"v-model",value:t.swimlane,expression:"swimlane"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.swimlane=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("None")]),e("option",{attrs:{value:"category"}},[t._v("Categories")]),e("option",{attrs:{value:"bucketType"}},[t._v("Bucket Specific")])])]),e("details",{staticClass:"d-inline-block bg-light small border rounded mr-2 px-2"},[e("summary",{staticClass:"p-2"},[e("b",[t._v("Filters: "+t._s(t.filter_summary))])]),e("div",{staticClass:"p-2 bg-light"},[e("table",[e("tr",[t._m(0),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_hostname,expression:"filter_hostname"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_hostname=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),t._l(t.hosts,(function(n){return e("option",{domProps:{value:n}},[t._v(t._s(n))])}))],2)])]),e("tr",[t._m(1),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_client,expression:"filter_client"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_client=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),t._l(t.clients,(function(n){return e("option",{domProps:{value:n}},[t._v(t._s(n))])}))],2)])])])])]),0!==t.num_events?e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Events shown: "+t._s(t.num_events))]):t._e(),0===t.num_events?e("b-alert",{staticClass:"d-inline-block p-2 mb-0 mt-2",attrs:{variant:"warning",show:""}},[t._v("No events match selected criteria. Timeline is not updated.")]):t._e(),e("div",{staticClass:"float-right small text-muted pt-3"},[e("tr",[t._m(2),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_duration,expression:"filter_duration"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_duration=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),e("option",{domProps:{value:2}},[t._v("2+ secs")]),e("option",{domProps:{value:5}},[t._v("5+ secs")]),e("option",{domProps:{value:10}},[t._v("10+ secs")]),e("option",{domProps:{value:30}},[t._v("30+ sec")]),e("option",{domProps:{value:60}},[t._v("1+ mins")]),e("option",{domProps:{value:120}},[t._v("2+ mins")]),e("option",{domProps:{value:180}},[t._v("3+ mins")]),e("option",{domProps:{value:600}},[t._v("10+ mins")]),e("option",{domProps:{value:1800}},[t._v("30+ mins")]),e("option",{domProps:{value:3600}},[t._v("1+ hrs")]),e("option",{domProps:{value:7200}},[t._v("2+ hrs")])])])])]),e("div",{staticClass:"d-inline-block pt-3",staticStyle:{float:"right",color:"#999"}},[t._v("Drag to pan and scroll to zoom")]),null!==t.buckets?e("div",[e("div",{staticStyle:{clear:"both"}}),e("vis-timeline",{attrs:{buckets:t.buckets,showRowLabels:!0,queriedInterval:t.daterange,swimlane:t.swimlane,updateTimelineWindow:t.updateTimelineWindow}}),e("aw-devonly",{attrs:{reason:"Not ready for production, still experimenting"}},[e("aw-calendar",{attrs:{buckets:t.buckets}})],1)],1):e("div",[e("h1",{staticClass:"aw-loading"},[t._v("Loading...")])])],1)},a=[function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Host:")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Client:")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Duration:")])])}],r=n(10538),l=n(65482),o=n(31126),s=n.n(o),u=(n(87136),n(50785),n(19693),n(14913),n(29979),n(14602),n(60933),n(96380),n(91059),n(42838),n(94009),n(28743),n(80475),n(12824),n(15195),n(45708),n(58476),n(58379),n(95093)),c=n.n(u),d=n(49866),v=n(28880),m=n(35576);const p={name:"Timeline",data:function(){return{all_buckets:null,hosts:null,buckets:null,clients:null,daterange:null,maxDuration:2678400,filter_hostname:null,filter_client:null,filter_duration:null,swimlane:null,updateTimelineWindow:!0}},created:function(){var t=window.location.search;if(!t){var e=window.location.hash,n=e.indexOf("?");-1!==n&&(t=e.slice(n))}var i=new URLSearchParams(t),a=i.get("start"),r=i.get("end");a&&r&&(this.daterange=[c()(a),c()(r)])},computed:{timeintervalDefaultDuration:function(){var t=(0,d.C$)();return Number(t.durationDefault)},num_events:function(){return s()(this.buckets||[],"events.length")},filter_summary:function(){var t=[];return this.filter_hostname&&t.push(this.filter_hostname),this.filter_client&&t.push(this.filter_client),this.filter_duration>0&&t.push((0,m.seconds_to_duration)(this.filter_duration)),t.length>0?t.join(", "):"none"}},watch:{daterange:function(){this.updateTimelineWindow=!0,this.getBuckets()},filter_hostname:function(){this.updateTimelineWindow=!1,this.getBuckets()},filter_client:function(){this.updateTimelineWindow=!1,this.getBuckets()},filter_duration:function(){this.updateTimelineWindow=!1,this.getBuckets()},swimlane:function(){this.updateTimelineWindow=!1,this.getBuckets()}},methods:{getBuckets:function(){var t=this;return(0,l.A)((0,r.A)().mark((function e(){var n;return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.daterange){e.next=2;break}return e.abrupt("return");case 2:return e.t0=Object,e.next=5,(0,v._)().getBucketsWithEvents({start:t.daterange[0].format(),end:t.daterange[1].format()});case 5:e.t1=e.sent,t.all_buckets=e.t0.freeze.call(e.t0,e.t1),t.hosts=Array.from(new Set(t.all_buckets.map((function(t){return t.hostname})))),t.clients=Array.from(new Set(t.all_buckets.map((function(t){return t.client})))),n=t.all_buckets,t.filter_hostname&&(n=n.filter((function(e){return e.hostname===t.filter_hostname}))),t.filter_client&&(n=n.filter((function(e){return e.client===t.filter_client}))),t.filter_duration>0&&n.forEach((function(e){e.events=e.events.filter((function(e){return e.duration>=t.filter_duration}))})),t.buckets=n;case 14:case"end":return e.stop()}}),e)})))()}}},_=p;var f=n(81656),h=(0,f.A)(_,i,a,!1,null,"20bd2c5c",null);const g=h.exports},31126:(t,e,n)=>{var i=n(15389),a=n(40102);function r(t,e){return t&&t.length?a(t,i(e,2)):0}t.exports=r},40102:t=>{function e(t,e){var n,i=-1,a=t.length;while(++i<a){var r=e(t[i]);void 0!==r&&(n=void 0===n?r:n+r)}return n}t.exports=e}}]);
//# sourceMappingURL=8580.1b92524d.js.map